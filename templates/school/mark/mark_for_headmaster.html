{% load mark %}<table class="table table-bordered table-striped grid fifth-row" id="markTable"><thead><tr>    <th rowspan=2 colspan=1 width="1%"        style="border-bottom-width:0;border-right-width:0;padding:0;">        STT    </th>    <th rowspan=2 colspan=1 width="1%"        style="border-bottom-width:0;border-left-width:0">    </th>    <th rowspan=3 colspan=2  width="20%" class="align-left">        Họ và tên    </th>    <th rowspan=3 align="center"  width="5%">        Ngày sinh    </th>    <th colspan="{{maxColMieng}}" style="width:20%" id="colMieng">        Điểm hệ số 1 - Miệng    </th>    <th colspan="{{maxCol15Phut}}" style="width:20%" id="col15Phut">        Điểm hệ số 1 - Viết    </th>    <th colspan="{{maxColMotTiet}}" style="width:20%" id="colMotTiet">        Điểm hệ số 2    </th>    <th rowspan=2 style="width:1%;border-bottom-width:0;">        Thi cuối kì    </th>    {% ifequal selectedTerm.number 1 %}        <th rowspan=2 style="width:5%" id="-117" onclick="checkCol(this,1)"            style="border-bottom-width:0;">            TBHK        </th>    {% else %}        <th colspan=3 style="width:15%">            ĐIỂM TRUNG BÌNH        </th>    {% endifequal %}    {% if isSchool %}        <th rowspan=3 style="width:1%;">            Ghi chú        </th>    {% endif %}</tr><tr>    {% for i in secondLoop %}        {% if i <= maxColMieng %}            <th width="3%"  onclick="checkCol(this)"                style="border-bottom-width:0;"> {{ i }} </th>        {% else %}            <th width="3%" onclick="checkCol(this)"                style="border-bottom-width:0;display:none;"> {{ i }} </th>        {% endif %}    {% endfor %}    {% for i in secondLoop %}        {% if i <= maxCol15Phut %}            <th width="3%" onclick="checkCol(this)" style="border-bottom-width:0;"> {{ i }} </th>        {% else %}            <th width="3%" onclick="checkCol(this)"                style="border-bottom-width:0;display:none;"> {{ i }} </th>        {% endif %}    {% endfor %}    {% for i in secondLoop %}        {% if i <= maxColMotTiet %}            <th width="3%" onclick="checkCol(this)" style="border-bottom-width:0;"> {{ i }} </th>        {% else %}            <th width="3%" align="center" onclick="checkCol(this)"                style="border-bottom-width:0;display:none"> {{ i }} </th>        {% endif %}    {% endfor %}    {% ifequal selectedTerm.number 2 %}        <th width="5%" onclick="checkCol(this)" id="-117" style="border-bottom-width:0;">HK I</th>        <th width="5%" onclick="checkCol(this)" id="-118" style="border-bottom-width:0;">HK II</th>        <th width="5%" onclick="checkCol(this)" id="-119" style="border-bottom-width:0;"> CN</th>    {% endifequal %}</tr><tr>    <th style="border-right-width:0; border-top-width:0;" width="1%">&nbsp</th>    <th title="Click vào đây để chọn tất cả" style="border-left-width:0; border-top-width:0;" width="1%">        <input type="checkbox" id="checkAllRow" onclick="checkAll(this)" style="display:none">    </th>    {% for i in secondLoop %}        {% if i <= maxColMieng %}            <th onclick="checkCol(this)" style="border-top-width:0">                <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox"                       id="colCheckbox{{ "0"|toNumber:forloop.counter }}" style="display:none">            </th>        {% else %}            <th onclick="checkCol(this)" style="border-top-width:0;display:none">                <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox"                       id="colCheckbox{{ "0"|toNumber:forloop.counter }}" style="display:none">            </th>        {% endif %}    {% endfor %}    {% for i in secondLoop %}        {% if i <= maxCol15Phut %}            <th onclick="checkCol(this)" style="border-top-width:0;">                <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox"                       id="colCheckbox{{ "1"|toNumber:forloop.counter }}" style="display:none">            </th>        {% else %}            <th onclick="checkCol(this)" style="border-top-width:0;display:none">                <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox"                       id="colCheckbox{{ "1"|toNumber:forloop.counter }}" style="display:none">            </th>        {% endif %}    {% endfor %}    {% for i in secondLoop %}        {% if i <= maxColMotTiet %}            <th onclick="checkCol(this)" style="border-top-width:0;">                <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox"                       id="colCheckbox{{ "2"|toNumber:forloop.counter }}" style="display:none">            </th>        {% else %}            <th onclick="checkCol(this)" style="border-top-width:0;display:none">                <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox"                       id="colCheckbox{{ "2"|toNumber:forloop.counter }}" style="display:none">            </th>        {% endif %}    {% endfor %}    <th onclick="checkCol(this)" style="border-top-width:0;">        <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox" id="colCheckbox25"               style="display:none">    </th>    {% ifequal selectedTerm.number 2 %}        <th onclick="checkCol(this)" style="border-top-width:0;">            <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox" id="colCheckbox26"                   style="display:none">        </th>        <th onclick="checkCol(this)" style="border-top-width:0;">            <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox" id="colCheckbox27"                   style="display:none">        </th>        <th onclick="checkCol(this)" id="-219" style="border-top-width:0;">            <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox" id="colCheckbox28"                   style="display:none">        </th>    {% else %}        <th onclick="checkCol(this)" id="-217" style="border-top-width:0;">            <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox" id="colCheckbox26"                   style="display:none">        </th>    {% endifequal %}</tr></thead><tbody>{% ifequal selectedTerm.number 1 %}    {% for p,m,dml in list %}        <tr>            <td onclick="select(this)" style="border-right-width:0;">                {{ forloop.counter }}            </td>            <td onclick="select(this)" style="border-left-width:0;">                <input title="Có thể click vào cột họ tên và ngày sinh để chọn cho nhanh hơn" type="checkbox"                       id="rowCheckbox{{forloop.counter}}" style="display:none" onclick=" this.checked = !this.checked "  >            </td>            <td onclick="select(this)" class="align-left" style="border-right-width:0;" width="15%">                {{ p.last_name }}            </td>            <td onclick="select(this)" class="align-left" style="border-left-width:0;" width="5%">                {{ p.first_name }}            </td>            <td onclick="select(this)">                {{ p.birthday|date:"SHORT_DATE_FORMAT" }}            </td>            {% for len,aList in dml %}                {% for a in aList %}                    <td>                        {{ a }}                    </td>                {% endfor %}                {% for i in secondLoop %}                    {% if i > len %}                        {% if forloop.parentloop.counter == 1 and i <= maxColMieng or forloop.parentloop.counter == 2 and i <= maxCol15Phut or forloop.parentloop.counter == 3 and i <= maxColMotTiet %}                            <td>                            </td>                        {% else %}                            <td style="display:none">                            </td>                        {% endif %}                    {% endif %}                {% endfor %}            {% endfor %}            <td>                {{ m.ck|floatformat:"1" }}            </td>            {% if selectedSubject.nx %}                <td>                     {{ m.tb|floatformat:"1" }}                </td>            {% else %}                <td onclick="checkToSend(this)"                    style="">                    {{ m.tb|floatformat:"1" }}                </td>            {% endif %}            {% if isSchool %}                {% if m.note|filterNote:user.id != "" %}                    <td title="{{m.note|filterNote:user.id}}" style="cursor:pointer;"                        id="edit_{{forloop.counter}}"                            >                        <i class="icon-file"></i>                    </td>                {% else %}                    <td style="cursor:pointer;" id="edit_{{forloop.counter}}">                        <i class="icon-check-empty"></i>                    </td>                {% endif %}            {% endif %}        </tr>    {% endfor %}    </tbody>    <tfoot>    <tr>        <td colspan="5"> Trung bình</td>        {% for i in secondLoop %}            <td style="display:none"></td>            <td style="display:none"></td>            <td style="display:none"></td>        {% endfor %}        <td></td>        <td></td>        {% if isSchool %}            <td></td>        {% endif %}    </tr>    </tfoot>    </table>    {% for p,m,dml in list %}        <script>            setArrayId({{m.id}});            setSentMark("{{m.sent}}");            if (position == "GIAO_VIEN")                setEditable("{{m.time}}");        </script>    {% endfor %}{% else %}    {% for p,m,dml,hk1,tbnam in list %}        <tr>            <td onclick="select(this)" style="border-right-width:0;">                {{ forloop.counter }}            </td>            <td onclick="select(this)" style="border-left-width:0;">                <input title="Có thể bấm chuột vào cột họ tên và ngày sinh để chọn cho nhanh hơn" type="checkbox"                       id="rowCheckbox{{forloop.counter}}" style="display:none" onclick=" this.checked = !this.checked ">            </td>            <td class="align-left" style="border-right-width:0;" width="15%" onclick="select(this)">                {{ p.last_name }}            </td>            <td class="align-left" style="border-left-width:0;" width="5%" onclick="select(this)">                {{ p.first_name }}            </td>            <td onclick="select(this)">                {{ p.birthday|date:"SHORT_DATE_FORMAT" }}            </td>            {% for len,aList in dml %}                {% for a in aList %}                    <td>                         {{ a }}                    </td>                {% endfor %}                {% for i in secondLoop %}                    {% if i > len %}                        {% if forloop.parentloop.counter == 1 and i <= maxColMieng or forloop.parentloop.counter == 2 and i <= maxCol15Phut or forloop.parentloop.counter == 3 and i <= maxColMotTiet %}                            <td>                                                            </td>                        {% else %}                            <td style="display:none" >                                                        </td>                        {% endif %}                    {% endif %}                {% endfor %}            {% endfor %}            <td>                {{ m.ck|floatformat:"1" }}            </td>            <td onclick="checkToSend(this)"                style="">                {{ hk1.tb|floatformat:"1" }}            </td>            {% if selectedSubject.nx %}                <td>                     {{ m.tb|floatformat:"1" }}                </td>                <td>                     {{ tbnam.tb_nam|floatformat:"1" }}                </td>            {% else %}                <td onclick="checkToSend(this)"                    style="">                    {{ m.tb|floatformat:"1" }}                </td>                <td onclick="checkToSend(this)"                    style="">                    {{ tbnam.tb_nam|floatformat:"1" }}                </td>            {% endif %}            {% if isSchool %}                {% if m.note|filterNote:user.id != "" %}                    <td title="{{m.note|filterNote:user.id}}" style="cursor:pointer;"                        id="edit_{{forloop.counter}}"                            >                        <i class="icon-file"></i>                    </td>                {% else %}                    <td style="cursor:pointer; " id="edit_{{forloop.counter}}">                        <i class="icon-check-empty"></i>                    </td>                {% endif %}            {% endif %}        </tr>    {% endfor %}    </tbody>    <tfoot>    <tr>        <td colspan="5"> Trung bình</td>        {% for i in secondLoop %}            <td style="display:none"></td>            <td style="display:none"></td>            <td style="display:none"></td>        {% endfor %}        <td></td>        <td></td>        <td></td>        <td></td>        {% if isSchool %}            <td></td>        {% endif %}    </tr>    </tfoot>    </table>    {% for p,m,ea,hk1,tbnam,id in list %}        <script>            setArrayId({{m.id}});            setSentMark("{{m.sent}}");            if (position == "GIAO_VIEN")                setEditable("{{m.time}}");            setSentTbNam("{{tbnam.sent}}");            setSentHk1("{{hk1.sent}}");            if (position == "GIAO_VIEN")                setEditableTbNam("{{tbnam.time}}");        </script>    {% endfor %}{% endifequal %}