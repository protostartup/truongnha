{% load mark %}<table class="table table-bordered table-striped grid fifth-row" id="markTable"><thead><tr>    <th rowspan=2 colspan=1 width="1%"        style="border-bottom:none;border-right:none;">        STT    </th>    <th rowspan=2 colspan=1 width="1%"        style="border-bottom:none;border-left:none">    </th>    <th rowspan=2 colspan=2 width="20%" class="align-left">        Họ và tên    </th>    <th rowspan=2 align="center" width="5%">        Ngày sinh    </th>    <th colspan="{{ maxColMieng }}" style="width:20%" id="colMieng">        Hệ số 1 - Miệng    </th>    <th colspan="{{ maxCol15Phut }}" style="width:20%" id="col15Phut">        Hệ số 1 - Viết    </th>    <th colspan="{{ maxColMotTiet }}" style="width:20%" id="colMotTiet">        Hệ số 2    </th>    <th rowspan=2 style="width:1%;border-bottom:none;">        Thi cuối kì    </th>    {% ifequal selectedTerm.number 1 %}        <th rowspan=2 style="width:5%" id="-117" onclick="checkCol(this,1)"            style="border-bottom:none;">            TBHK        </th>    {% else %}        <th colspan=3 style="width:15%">            ĐIỂM TRUNG BÌNH        </th>    {% endifequal %}    {% if isSchool %}        <th rowspan=2 style="width:1%;">            Ghi chú        </th>    {% endif %}</tr><tr>    {% for i in secondLoop %}        {% if i <= maxColMieng %}            <th id="col_1_{{ forloop.counter }}" width="3%" style="border-bottom:none;">                {{ i }}            </th>        {% else %}            <th id="col_1_{{ forloop.counter }}" width="3%" style="border-bottom:none;display:none;">                {{ i }}            </th>        {% endif %}    {% endfor %}    {% for i in secondLoop %}        {% if i <= maxCol15Phut %}            <th id="col_2_{{ forloop.counter }}" width="3%" style="border-bottom:none;">                {{ i }}            </th>        {% else %}            <th id="col_2_{{ forloop.counter }}" width="3%"                style="border-bottom:none;display:none;"> {{ i }} </th>        {% endif %}    {% endfor %}    {% for i in secondLoop %}        {% if i <= maxColMotTiet %}            <th id="col_3_{{ forloop.counter }}" width="3%" style="border-bottom:none;">                {{ i }}            </th>        {% else %}            <th id="col_3_{{ forloop.counter }}" width="3%" align="center" style="border-bottom:none;display:none">                {{ i }}            </th>        {% endif %}    {% endfor %}    {% ifequal selectedTerm.number 2 %}        <th width="5%" onclick="checkCol(this)" id="-117" style="border-bottom:none;">HK I</th>        <th width="5%" onclick="checkCol(this)" id="-118" style="border-bottom:none;">HK II</th>        <th width="5%" onclick="checkCol(this)" id="-119" style="border-bottom:none;"> CN</th>    {% endifequal %}</tr><tr>    <th style="border-right:none; border-top:none;" width="1%"></th>    <th title="Click vào đây để chọn tất cả" style="border-left:none; border-top:none;" width="1%">        <input type="checkbox" id="checkAllRow" onclick="checkAll(this)" style="display:none">    </th>    <th style="border-top:none;border-right:none;"></th>    <th style="border-top:none;border-left:none;"></th>    <th style="border-top:none;"></th>    {% for i in secondLoop %}        {% if i <= maxColMieng %}            <th id="col_7_{{ forloop.counter }}" style="border-top:none">                <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox"                       id="colCheckbox{{ "0"|toNumber:forloop.counter }}" style="display:none">            </th>        {% else %}            <th id="col_8_{{ forloop.counter }}" style="border-top:none;display:none">                <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox"                       id="colCheckbox{{ "0"|toNumber:forloop.counter }}" style="display:none">            </th>        {% endif %}    {% endfor %}    {% for i in secondLoop %}        {% if i <= maxCol15Phut %}            <th id="col_9_{{ forloop.counter }}" style="border-top:none;">                <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox"                       id="colCheckbox{{ "1"|toNumber:forloop.counter }}" style="display:none">            </th>        {% else %}            <th id="col_10_{{ forloop.counter }}" style="border-top:none;display:none">                <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox"                       id="colCheckbox{{ "1"|toNumber:forloop.counter }}" style="display:none">            </th>        {% endif %}    {% endfor %}    {% for i in secondLoop %}        {% if i <= maxColMotTiet %}            <th id="col_11_{{ forloop.counter }}" style="border-top:none;">                <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox"                       id="colCheckbox{{ "2"|toNumber:forloop.counter }}" style="display:none">            </th>        {% else %}            <th id="col_12_{{ forloop.counter }}" style="border-top:none;display:none">                <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox"                       id="colCheckbox{{ "2"|toNumber:forloop.counter }}" style="display:none">            </th>        {% endif %}    {% endfor %}    <th id="col_13" style="border-top:none;">        <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox" id="colCheckbox25"               style="display:none">    </th>    {% ifequal selectedTerm.number 2 %}        <th id="col_14" style="border-top:none;">            <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox" id="colCheckbox26"                   style="display:none">        </th>        <th id="col_15" style="border-top:none;">            <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox" id="colCheckbox27"                   style="display:none">        </th>        <th onclick="checkCol(this)" id="-219" style="border-top:none;">            <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox" id="colCheckbox28"                   style="display:none">        </th>    {% else %}        <th onclick="checkCol(this)" id="-217" style="border-top:none;">            <input title="Click vào đây để chọn điểm này để gửi tin nhắn" type="checkbox" id="colCheckbox26"                   style="display:none">        </th>    {% endifequal %}    {% if isSchool %}        <th style="border-top:none;"></th>    {% endif %}</tr></thead><tbody>{% ifequal selectedTerm.number 1 %}    {% for p,m,dml in list %}        <tr>            <td id="cell__{{ forloop.counter }}_1" style="border-right:none;">                {{ forloop.counter }}            </td>            <td id="cell__{{ forloop.counter }}_2" style="border-left:none;">                <input title="Có thể click vào cột họ tên và ngày sinh để chọn cho nhanh hơn" type="checkbox"                       id="rowCheckbox{{ forloop.counter }}" style="display:none"                       onclick=" this.checked = !this.checked ">            </td>            <td id="cell__{{ forloop.counter }}_3" class="align-left" style="border-right:none;" width="15%">                {{ p.last_name }}            </td>            <td id="cell__{{ forloop.counter }}_4" class="align-left" style="border-left:none;" width="5%">                {{ p.first_name }}            </td>            <td id="cell__{{ forloop.counter }}_5">                {{ p.birthday|date:"SHORT_DATE_FORMAT" }}            </td>            {% for len,aList in dml %}                {% for a in aList %}					{% if forloop.counter == 1 %}						<td class="highlight-left" id="cell_{{ forloop.parentloop.parentloop.counter }}_{{ forloop.parentloop.counter }}_{{ forloop.counter }}">{{ a }}</td>					{% else %}						<td id="cell_{{ forloop.parentloop.parentloop.counter }}_{{ forloop.parentloop.counter }}_{{ forloop.counter }}">{{ a }}</td>					{% endif %}	                {% endfor %}                {% for i in secondLoop %}                    {% if i > len %}                        {% if forloop.parentloop.counter == 1 and i <= maxColMieng or forloop.parentloop.counter == 2 and i <= maxCol15Phut or forloop.parentloop.counter == 3 and i <= maxColMotTiet %}							{% if forloop.counter == 1 %}								<td class="highlight-left" id="cell_{{ forloop.parentloop.parentloop.counter }}_{{ forloop.parentloop.counter }}_{{ forloop.counter }}"></td>							{% else %}											<td id="cell_{{ forloop.parentloop.parentloop.counter }}_{{ forloop.parentloop.counter }}_{{ forloop.counter }}"></td>							{% endif %}		                        {% else %}                            <td style="display:none"                                id="cell_{{ forloop.parentloop.parentloop.counter }}_{{ forloop.parentloop.counter }}_{{ forloop.counter }}"></td>                        {% endif %}                    {% endif %}                {% endfor %}            {% endfor %}            <td class="highlight-left" id="cell_{{ forloop.counter }}_25">                {{ m.ck|floatformat:"1" }}            </td>            {% if selectedSubject.nx %}                <td id="cell_{{ forloop.counter }}_26">                    {{ m.tb|floatformat:"1" }}                </td>            {% else %}                <td onclick="checkToSend(this)">                    {{ m.tb|floatformat:"1" }}                </td>            {% endif %}            {% if isSchool %}                {% if m.note|filterNote:user.id != "" %}                    <td title="{{ m.note|filterNote:user.id }}" style="cursor:pointer;"                        id="edit_{{ forloop.counter }}"                            >                        <i class="icon-file"></i>                    </td>                {% else %}                    <td style="cursor:pointer;" id="edit_{{ forloop.counter }}">                        <i class="icon-check-empty"></i>                    </td>                {% endif %}            {% endif %}        </tr>    {% endfor %}    </tbody>    {% if not selectedSubject.nx %}        <tfoot>        <tr>            <td colspan="5"> Trung bình</td>            {% for i in secondLoop %}                <td style="display:none"></td>                <td style="display:none"></td>                <td style="display:none"></td>            {% endfor %}            <td></td>            <td></td>            {% if isSchool %}                <td></td>            {% endif %}        </tr>        </tfoot>    {% endif %}    </table>    {% for p,m,dml in list %}        <script>            setArrayId({{m.id}});            setSentMark("{{m.sent}}");            if (position == "GIAO_VIEN")                setEditable("{{m.time}}");        </script>    {% endfor %}{% else %}    {% for p,m,dml,hk1,tbnam in list %}        <tr>            <td id="cell__{{ forloop.counter }}_1" style="border-right:none;">{{ forloop.counter }}</td>            <td id="cell__{{ forloop.counter }}_2" style="border-left:none;">                <input title="Có thể bấm chuột vào cột họ tên và ngày sinh để chọn cho nhanh hơn" type="checkbox"                       id="rowCheckbox{{ forloop.counter }}" style="display:none"                       onclick=" this.checked = !this.checked ">            </td>            <td id="cell__{{ forloop.counter }}_3" class="align-left" style="border-right:none;" width="15%">                {{ p.last_name }}            </td>            <td id="cell__{{ forloop.counter }}_4" class="align-left" style="border-left:none;" width="5%">                {{ p.first_name }}            </td>            <td id="cell__{{ forloop.counter }}_5">                {{ p.birthday|date:"SHORT_DATE_FORMAT" }}            </td>            {% for len,aList in dml %}                {% for a in aList %}					{% if forloop.counter == 1 %}						<td class="highlight-left" id="cell_{{ forloop.parentloop.parentloop.counter }}_{{ forloop.parentloop.counter }}_{{ forloop.counter }}">{{ a }}</td>					{% else %}						<td id="cell_{{ forloop.parentloop.parentloop.counter }}_{{ forloop.parentloop.counter }}_{{ forloop.counter }}">{{ a }}</td>					{% endif %}	                {% endfor %}                {% for i in secondLoop %}                    {% if i > len %}                        {% if forloop.parentloop.counter == 1 and i <= maxColMieng or forloop.parentloop.counter == 2 and i <= maxCol15Phut or forloop.parentloop.counter == 3 and i <= maxColMotTiet %}							{% if forloop.counter == 1 %}								<td class="highlight-left" id="cell_{{ forloop.parentloop.parentloop.counter }}_{{ forloop.parentloop.counter }}_{{ forloop.counter }}"></td>							{% else %}											<td id="cell_{{ forloop.parentloop.parentloop.counter }}_{{ forloop.parentloop.counter }}_{{ forloop.counter }}"></td>							{% endif %}		                        {% else %}                            <td style="display:none"                                id="cell_{{ forloop.parentloop.parentloop.counter }}_{{ forloop.parentloop.counter }}_{{ forloop.counter }}"></td>                        {% endif %}                    {% endif %}                {% endfor %}            {% endfor %}            <td class="highlight-left" id="cell_{{ forloop.counter }}_25">                {{ m.ck|floatformat:"1" }}            </td>            <td onclick="checkToSend(this)">                {{ hk1.tb|floatformat:"1" }}            </td>            {% if selectedSubject.nx %}                <td id="cell_{{ forloop.counter }}_26">                    {{ m.tb|floatformat:"1" }}                </td>                <td id="cell_{{ forloop.counter }}_27">                    {{ tbnam.tb_nam|floatformat:"1" }}                </td>            {% else %}                <td onclick="checkToSend(this)">                    {{ m.tb|floatformat:"1" }}                </td>                <td onclick="checkToSend(this)">                    {{ tbnam.tb_nam|floatformat:"1" }}                </td>            {% endif %}            {% if isSchool %}                {% if m.note|filterNote:user.id != "" %}                    <td title="{{ m.note|filterNote:user.id }}" style="cursor:pointer;"                        id="edit_{{ forloop.counter }}"                            >                        <i class="icon-file"></i>                    </td>                {% else %}                    <td style="cursor:pointer; " id="edit_{{ forloop.counter }}">                        <i class="icon-check-empty"></i>                    </td>                {% endif %}            {% endif %}        </tr>    {% endfor %}    </tbody>    {% if not selectedSubject.nx %}        <tfoot>        <tr>            <td colspan="5"> Trung bình</td>            {% for i in secondLoop %}                <td style="display:none"></td>                <td style="display:none"></td>                <td style="display:none"></td>            {% endfor %}            <td></td>            <td></td>            <td></td>            <td></td>            {% if isSchool %}                <td></td>            {% endif %}        </tr>        </tfoot>    {% endif %}    </table>    {% for p,m,ea,hk1,tbnam,id in list %}        <script>            setArrayId({{m.id}});            setSentMark("{{m.sent}}");            if (position == "GIAO_VIEN")                setEditable("{{m.time}}");            setSentTbNam("{{tbnam.sent}}");            setSentHk1("{{hk1.sent}}");            if (position == "GIAO_VIEN")                setEditableTbNam("{{tbnam.time}}");        </script>    {% endfor %}{% endifequal %}